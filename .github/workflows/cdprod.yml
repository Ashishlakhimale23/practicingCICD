name : practicing github actions for staging branch
on : 
    push:
        branches:
            - production
jobs : 
    build : 
        name : Build 
        runs-on : ubuntu-latest
        steps: 
            - name : checkout the code 
              uses : actions/checkout@v2
            - name : executing the code on the vm
              uses : appleboy/ssh-action@master
              with : 
                host : 65.0.45.110
                username : ubuntu
                key : ${{secrets.PRIVATE_SECRET_KEY}}
                port : 22
                debug : true
                script : | 
                   git clone https://github.com/Ashishlakhimale23/practicingCICD.git
                   cd practicingCICD
                   git checkout production
                   git pull origin production
                   npm install 
                   npm run build 
                   npm run dev
